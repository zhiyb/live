<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/vjs/video-js.css" rel="stylesheet">
</head>

<body style="background-color: black">
  <video-js
    id="stream"
    class="video-js vjs-default-skin vjs-fill"
    controls
    preload="auto"
    poster="default.png"
    data-setup="{}"
  >
    <p class="vjs-no-js">
    To view this video please enable JavaScript, and consider upgrading to a
    web browser that
    <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
    </p>
  </video-js>
  <script src="/vjs/video.min.js"></script>
  <script src="/vjs/qlvl/videojs-contrib-quality-levels.min.js"></script>
  <script>
    function findGetParameter(parameterName) {
      var result = null,
        tmp = [];
      var items = location.search.substr(1).split("&");
      for (var index = 0; index < items.length; index++) {
        tmp = items[index].split("=");
        if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
      }
      return result;
    }

    var key = findGetParameter('key');
    if (!key)
      key = 'stream';
    document.getElementById("stream").setAttribute("poster", key + '.png?v=0');

    var player = videojs('stream');
    player.src(key + '.m3u8');
    //player.hlsQualitySelector({displayCurrentQuality: true});
  </script>
  <script src="/vjs/hlsqs/videojs-hls-quality-selector.min.js"></script>
  <script>
    var player = videojs('stream');
    player.hlsQualitySelector({displayCurrentQuality: true});
  </script>
</body>
